--revisar a questão do craft

CREATE TABLE mapa (
    idMapa SERIAL PRIMARY KEY,
    nomeM VARCHAR(50) NOT NULL,
    descricao TEXT DEFAULT ''
);

CREATE TABLE regiao (
    idRegiao SERIAL PRIMARY KEY,
    idMapa INTEGER REFERENCES mapa(idMapa),
    nomeR VARCHAR(50) NOT NULL,
    tempR REAL NOT NULL,
    descricao TEXT DEFAULT ''
);

CREATE TABLE sala (
    idSala SERIAL PRIMARY KEY,
    idRegiao INTEGER REFERENCES regiao(idRegiao),
    nomeS VARCHAR(50) NOT NULL,
    descricao TEXT DEFAULT ''
);

CREATE TABLE personagem (
    idPersonagem SERIAL PRIMARY KEY,
    idSala INTEGER REFERENCES sala(idSala) DEFAULT 1,
    tipoP VARCHAR(25),
    nomeP VARCHAR(50) NOT NULL,
    hpMax INTEGER DEFAULT 100,
    hpAtual INTEGER DEFAULT 100,
);

CREATE TABLE vitalidade(
    idVitalidade SERIAL PRIMARY KEY,
    idPersonagem INTEGER NOT NULL,
    nutricao INTEGER DEFAULT 100,
    hidratacao INTEGER DEFAULT 100,
    stamina INTEGER DEFAULT 100,
    calor INTEGER DEFAULT 50,
    dano INTEGER DEFAULT 0,
    FOREIGN KEY (idPersonagem) REFERENCES personagem(idPersonagem)
    ON DELETE CASCADE
);

CREATE TABLE distrito (
    idDistrito SERIAL PRIMARY KEY,
    idPersonagem INTEGER NOT NULL,
    popularidade INTEGER DEFAULT 0,
    agilidade INTEGER,
    forca INTEGER,
    nado INTEGER,
    carisma INTEGER,
    combate INTEGER,
    pespicacia INTEGER,
    furtividade INTEGER,
    sobrevivencia INTEGER,
    precisao INTEGER,
    descricao TEXT DEFAULT '',
    FOREIGN KEY (idPersonagem) REFERENCES personagem(idPersonagem)
    ON DELETE CASCADE
);

CREATE TABLE inventario (
    idInventario SERIAL PRIMARY KEY,
    idPersonagem INTEGER NOT NULL,
    capMax INTEGER DEFAULT 2,
    capAtual INTEGER DEFAULT 0,
    FOREIGN KEY (idPersonagem) REFERENCES personagem(idPersonagem)
    ON DELETE CASCADE
);

CREATE TABLE personagem_jogavel (
    idPersonagem INTEGER PRIMARY KEY,
    idDistrito INTEGER REFERENCES distrito(idDistrito)
    --história
);

CREATE TABLE animal (
    idAnimal SERIAL PRIMARY KEY,
    idPersonagem INTEGER NOT NULL,
    FOREIGN KEY (idPersonagem) REFERENCES personagem(idPersonagem)
    ON DELETE CASCADE
);

CREATE TABLE bestante (
    idBestante SERIAL PRIMARY KEY,
    idPersonagem INTEGER NOT NULL,
    agilidade INTEGER,
    nado INTEGER,
    voo INTEGER,
    FOREIGN KEY (idPersonagem) REFERENCES personagem(idPersonagem)
    ON DELETE CASCADE
);

CREATE TABLE tributo (
    idTributo SERIAL PRIMARY KEY,
    idPersonagem INTEGER NOT NULL,
    idDistrito INTEGER NOT NULL,
    statusT BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (idPersonagem) REFERENCES personagem(idPersonagem) ON DELETE CASCADE,
    FOREIGN KEY (idDistrito) REFERENCES distrito(idDistrito) ON DELETE CASCADE
);

CREATE TABLE item (
    idItem SERIAL PRIMARY KEY,
    nome VARCHAR(50) NOT NULL
);

CREATE TABLE item_inventario (
    idItemInventario SERIAL PRIMARY KEY,
    idInventario INTEGER NOT NULL,
    idItem INTEGER NOT NULL,
    FOREIGN KEY (idInventario) REFERENCES inventario(idInventario) ON DELETE CASCADE,
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

CREATE TABLE vestimenta (
    idVestimenta SERIAL PRIMARY KEY,
    idItem INTEGER NOT NULL,
    descricao TEXT DEFAULT '',
    adCalor INTEGER NOT NULL,
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

CREATE TABLE arma (
    idArma SERIAL PRIMARY KEY,
    idItem INTEGER NOT NULL,
    descricao TEXT DEFAULT '',
    adDano INTEGER NOT NULL,
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

CREATE TABLE consumivel (
    idConsumivel SERIAL PRIMARY KEY,
    idItem INTEGER NOT NULL,
    adHid INTEGER,
    adNut INTEGER,
    adSta INTEGER,
    adHp INTEGER,
    adCalor INTEGER,
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

CREATE TABLE legivel (
    idLegivel SERIAL PRIMARY KEY,
    idItem INTEGER NOT NULL,
    conteudo TEXT DEFAULT '',
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

CREATE TABLE compartimento (
    idCompartimento SERIAL PRIMARY KEY,
    idItem INTEGER NOT NULL,
    adCapMax INTEGER NOT NULL,
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

CREATE TABLE utilidade (
    idUtilidade SERIAL PRIMARY KEY,
    idItem INTEGER NOT NULL,
    nome VARCHAR(50) NOT NULL,
    descricao TEXT DEFAULT '',
    geraItem BOOLEAN DEFAULT FALSE,
    capturaInimigo BOOLEAN DEFAULT FALSE,
    geraCalor BOOLEAN DEFAULT FALSE,
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

CREATE TABLE construtor (
    idConstrutor SERIAL PRIMARY KEY,
    idItem INTEGER NOT NULL,
    FOREIGN KEY (idItem) REFERENCES item(idItem) ON DELETE CASCADE
);

--tabela do companheiro
--tabelas sobre a história


INSERT INTO personagem (idPersonagem, idSala, nomeP, hpMax, hpAtual) VALUES (1, 1, 'Personagem1', 100, 100);
INSERT INTO mapa (nomeM, descricao) VALUES ('Mapa Central', 'O mapa principal do jogo.');
INSERT INTO regiao (idMapa, nomeR, tempR, descricao) VALUES (1, 'Floresta', 22.5, 'Uma floresta densa e úmida.');
INSERT INTO sala (idRegiao, nomeS, descricao) VALUES (1, 'Clareira', 'Uma clareira aberta no meio da floresta.');
INSERT INTO personagem (idSala, tipoP, nomeP, hpMax, hpAtual) VALUES (1, 'Guerreiro', 'Arthas', 120, 120);
INSERT INTO vitalidade (idPersonagem, nutricao, hidratacao, stamina, calor, dano) VALUES (1, 80, 90, 100, 50, 0);
INSERT INTO distrito (idPersonagem, popularidade, agilidade, forca, nado, carisma, combate, pespicacia, furtividade, sobrevivencia, precisao, descricao) 
VALUES (1, 10, 8, 7, 6, 5, 7, 9, 6, 8, 7, 'Distrito especializado em sobrevivência.');
INSERT INTO inventario (idPersonagem, capMax, capAtual) VALUES (1, 5, 2);
INSERT INTO personagem_jogavel (idPersonagem, idDistrito) VALUES (1, 1);
INSERT INTO animal (idPersonagem) VALUES (1);
INSERT INTO bestante (idPersonagem, agilidade, nado, voo) VALUES (1, 10, 7, 0);
INSERT INTO tributo (idPersonagem, idDistrito, statusT) VALUES (1, 1, TRUE);
INSERT INTO item (nome) VALUES ('Espada');
INSERT INTO item_inventario (idInventario, idItem) VALUES (1, 1);
INSERT INTO vestimenta (idItem, descricao, adCalor) VALUES (1, 'Uma armadura resistente.', 15);
INSERT INTO arma (idItem, descricao, adDano) VALUES (1, 'Uma espada afiada.', 20);
INSERT INTO consumivel (idItem, adHid, adNut, adSta, adHp, adCalor) VALUES (1, 10, 5, 20, 15, 0);
INSERT INTO legivel (idItem, conteudo) VALUES (1, 'Um antigo pergaminho com escrituras esquecidas.');
INSERT INTO compartimento (idItem, adCapMax) VALUES (1, 10);
INSERT INTO utilidade (idItem, nome, descricao, geraItem, capturaInimigo, geraCalor) 
VALUES (1, 'Kit de Sobrevivência', 'Um kit completo para sobrevivência.', TRUE, FALSE, TRUE);
INSERT INTO construtor (idItem) VALUES (1);
